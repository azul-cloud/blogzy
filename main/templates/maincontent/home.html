{% extends "maininclude/base.html" %}
{% load static from staticfiles %}

{% block title %}
  Travel Blog Wave | Create and Search Travel Blogs
{% endblock %}

{% block javascript %}
  {{ block.super }}
  <script src="{% static 'js/plugins/stellar.js' %}"></script>
  <script src="{% static 'js/stellar.js' %}"></script>
  {% include "maininclude/place_autocomplete.html" %}

  <script>
  $( "#search-overlay-form" ).submit(function() {
    // set the form action based on the place id
    var place_id = $("#id_place_id").val();
    console.log(place_id);

    $( "#search-overlay-form" ).attr("action", url = '/explore/map/' + place_id);
    console.log($( "#search-overlay-form" ).attr("action"));
    
    $( "#search-overlay-form" ).submit();
  });
  </script>
{% endblock %}

{% block main %}
  <div id="background" data-stellar-background-ratio="0.4" class="hidden-xs"></div>
  <div id="background" class="hidden-sm hidden-md hidden-lg"></div>

  <section class="search-overlay">
    <div class="row">
      <p class="search-overlay-text">
        Travel articles based on City, Country or Region
      </p>
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-6 col-sm-offset-2">
          <input name="place" id="place-search" placeholder="Search by Place" />
        </div>
        <div class="col-sm-2 col-xs-12">
          <a id="home-search" class="btn btn-primary col-xs-12" href="">
            <span class="glyphicon glyphicon-search"></span>
          </a>
        </div>
    </div>
  </section>

  <section class="container hidden-xs hidden-sm" id="main-information">
    <div class="jumbotron jumbotron-clear text-center">
      <div class="row row-padding">
        <h1>Travel Blogs Made Simple</h1>
      </div>
      <div class="row row-padding info-row">
        <a href="{% url 'blog-create' %}">
          <div class="col-md-4">
            <h3>Create Your Blog</h3>
            <span class="glyphicon glyphicon-edit"></span>
            <p>
              Easily create your own blog and reap the benefits of joining the best
              travel blog community
            </p>
          </div>
        </a>
        <a class="brand" href="{% url 'blog-recent-posts' %}">
          <div class="col-md-4">
            <h3>Read Travel Stories</h3>
            <span class="glyphicon glyphicon-book"></span>
            <p>
              Sort travel blogs by city, country, or topic to find what you're looking for
            </p>
          </div>
        </a>
        <a class="brand" href="{% url 'blog-recent-posts' %}">
          <div class="col-md-4">
            <h3>Travel Information</h3>
            <span class="glyphicon glyphicon-plane"></span>
            <p>
              There are many places to get travel information, but if you want in-depth
              information from <u>real</u> travelers, you found the right place
            </p>
          </div>
        </a>
      </div>
    </div>
  </section>

  <section id="recent-post-row" class="container-fluid">
    <div class="row row-padding hidden-xs">
      <div class="col-sm-6 col-sm-offset-3">
        <h2 class="text-center">Recent Posts</h2>
        {% include "maininclude/recent_post_carousel.html" %}
      </div>
    </div>
  </section>
{% endblock %}
